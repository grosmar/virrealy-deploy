<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div id="output1">
</div>
<div id="output2">
</div>
<div id="output3">
</div>

<canvas id="myCanvas" width="720" height="1280" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.</canvas>


<script>
    var x = 720/2;
    var y = 1280/2;

    var vx = 0;
    var vy = 0;
    var speed = 0;
    var friction = 0.85;

    var angle = 0;

    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.moveTo(x, y);

    if (window.DeviceOrientationEvent) {
        window.addEventListener('deviceorientation', function(event) {
            document.getElementById("output1").innerHTML = event.alpha + ' : ' + event.beta + ' : ' + event.gamma + " absolute : " + DeviceOrientationEvent.absolute;
            angle = Math.round(event.alpha);
        }, false);


    } else {
        document.getElementById("doEvent").innerHTML = "deviceorientation Not supported."
    }

    if (window.DeviceMotionEvent) {
        window.addEventListener("devicemotion", function(event) {
            document.getElementById("output2").innerHTML = "acceleration x: " + Math.round(event.acceleration.x*100)/100 +
                    "y: " + Math.round(event.acceleration.y*100)/100 + " z: " + Math.round(event.acceleration.z*100)/100 +
                    " / interval " +
                    event.interval;

            speed -= Math.abs(event.acceleration.y);
            //vy += event.acceleration.y/3;

            // vx *= friction;
            // vy *= friction;
            speed *= friction;

            x += speed * Math.cos(angle);
            y += speed * Math.sin(angle);

            document.getElementById("output3").innerHTML = "acceleration x: " + x +
                    "y: " + y + " speed: " + speed;

            //x -= Math.abs(vx) > 1 ? vx : 0;
            //y += Math.abs(vy) > 1 ? vy : 0;

//            x -= Math.abs(event.acceleration.x) > 1 ? event.acceleration.x : 0;
//            y += Math.abs(event.acceleration.y) > 1 ? event.acceleration.y : 0;

            ctx.lineTo(x, y);
            ctx.stroke();
        }, true);
    } else {
        document.getElementById("doEvent").innerHTML = "devicemotion Not supported."
    }
</script>
</body>
</html>